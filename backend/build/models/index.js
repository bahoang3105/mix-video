"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.init=exports.default=void 0;var _database=_interopRequireDefault(require("../config/database"));var _sequelize=_interopRequireDefault(require("sequelize"));var _promise=_interopRequireDefault(require("mysql2/promise"));var _RTMP=_interopRequireDefault(require("./RTMP"));var _Application=_interopRequireDefault(require("./Application"));var _Num=_interopRequireDefault(require("./Num"));var _Layer=_interopRequireDefault(require("./Layer"));var _Scene=_interopRequireDefault(require("./Scene"));var _File=_interopRequireDefault(require("./File"));var _Live=_interopRequireDefault(require("./Live"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const NODE_ENV=process.env.NODE_ENV||"localhost";const sequelize=new _sequelize.default({..._database.default[NODE_ENV].default,dialectOptions:{supportBigNumbers:true,bigNumberStrings:true},logging:false});const db={};db.Sequelize=_sequelize.default;db.sequelize=sequelize;db.live=(0,_Live.default)(sequelize,_sequelize.default);db.rtmp=(0,_RTMP.default)(sequelize,_sequelize.default);db.application=(0,_Application.default)(sequelize,_sequelize.default);db.num=(0,_Num.default)(sequelize,_sequelize.default);db.layer=(0,_Layer.default)(sequelize,_sequelize.default);db.scene=(0,_Scene.default)(sequelize,_sequelize.default);db.file=(0,_File.default)(sequelize,_sequelize.default);const init=async()=>{try{const connection=await _promise.default.createConnection({host:_database.default[NODE_ENV].default.host||"10.5.44.125",user:_database.default[NODE_ENV].default.username,password:_database.default[NODE_ENV].default.password,port:_database.default[NODE_ENV].default.port||"3306"});await connection.query("CREATE DATABASE IF NOT EXISTS mixVideo;");await db.rtmp.sequelize.query("DROP TABLE IF EXISTS rtmp;");await db.sequelize.sync()}catch(e){console.error(e)}};exports.init=init;var _default=db;exports.default=_default;