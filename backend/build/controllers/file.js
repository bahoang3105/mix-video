"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renameFile=exports.insertFile=exports.getFiles=exports.deleteFile=void 0;require("dotenv/config");var _models=_interopRequireDefault(require("../models"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const File=_models.default.file;const insertFile=async(req,res)=>{try{const{fileName,fileType,fileKey,url,liveId}=req.body;const newFile={liveId,fileType,fileKey,fileName,url,date:new Date};await File.create(newFile);return res.status(201).json({success:true})}catch(error){return res.status(400).json({success:false,message:error+" "})};};exports.insertFile=insertFile;const getFiles=async(req,res)=>{try{const listFile=await File.findAll({where:{liveId:req.query.liveId},order:[["date","DESC"]]});return res.status(200).json({files:listFile})}catch(err){return res.status(404).json({message:err+" "})}};exports.getFiles=getFiles;const deleteFile=async(req,res)=>{try{await File.destroy({where:{fileKey:req.body.fileKey}});return res.status(200).json({success:true})}catch(err){return res.status(404).json({message:err+" "})}};exports.deleteFile=deleteFile;const renameFile=async(req,res)=>{try{await File.update({fileName:req.body.fileName},{where:{fileKey:req.body.fileKey}});return res.status(200).json({success:true})}catch(err){return res.status(404).json({message:err+" "})}};exports.renameFile=renameFile;