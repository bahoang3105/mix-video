"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setNum=exports.getSceneNum=exports.getLayerNum=void 0;var _models=_interopRequireDefault(require("../models"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const Num=_models.default.num;const getLayerNum=async(req,res)=>{try{const live=await Num.findOne({attributes:["layerNum"],where:{liveId:req.query.liveId}});if(!live){await Num.create({liveId:req.query.liveId,layerNum:1,sceneNum:1});return res.status(200).json({layerNum:1})}return res.status(200).json({layerNum:live.layerNum})}catch(err){res.status(400).json({message:err})}};exports.getLayerNum=getLayerNum;const getSceneNum=async(req,res)=>{try{const live=await Num.findOne({attributes:["sceneNum"],where:{liveId:req.query.liveId}});if(!live){await Num.create({liveId:req.query.liveId,layerNum:1,sceneNum:1});return res.status(200).json({sceneNum:1})}return res.status(200).json({sceneNum:live.sceneNum})}catch(err){res.status(400).json({message:err+""})}};exports.getSceneNum=getSceneNum;const setNum=async(req,res)=>{try{const live=await Num.findOne({where:{liveId:req.body.liveId}});if(!live){await Num.create({liveId:req.body.liveId,layerNum:req.body.numLayer,sceneNum:req.body.numScene})}else{await Num.update({layerNum:req.body.numLayer,sceneNum:req.body.numScene},{where:{liveId:req.body.liveId}})}return res.status(201).json({success:true})}catch(err){return res.status(400).json({message:err})}};exports.setNum=setNum;